<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„è§†è§‰ç›²ç›’ âœ¨</title>
    <!-- å¼•å…¥ Tailwind CSS è¿›è¡Œå¿«é€Ÿæ ·å¼è®¾è®¡ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ FontAwesome å›¾æ ‡ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- å¼•å…¥ Confetti ç‰¹æ•ˆåº“ (æ’’èŠ±æ•ˆæœ) -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.css"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <style>
        /* å®šä¹‰ä¸€äº›è‡ªå®šä¹‰åŠ¨ç”» */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
            100% { transform: translateY(0px); }
        }

        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }

        @keyframes popIn {
            0% { transform: scale(0.5); opacity: 0; }
            70% { transform: scale(1.05); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }

        @keyframes glow {
            0% { box-shadow: 0 0 5px #a78bfa, 0 0 10px #a78bfa; }
            50% { box-shadow: 0 0 20px #c084fc, 0 0 30px #c084fc; }
            100% { box-shadow: 0 0 5px #a78bfa, 0 0 10px #a78bfa; }
        }

        .animate-float {
            animation: float 3s ease-in-out infinite;
        }

        .animate-shake {
            animation: shake 0.5s;
            animation-iteration-count: infinite;
        }

        .animate-pop {
            animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }
        
        /* ç»ç’ƒæ‹Ÿæ€èƒŒæ™¯å¡ç‰‡ */
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* éšè—æ»šåŠ¨æ¡ */
        ::-webkit-scrollbar {
            width: 0px;
            background: transparent;
        }
    </style>
</head>
<body class="bg-slate-900 text-white min-h-screen flex flex-col overflow-hidden relative font-sans">

    <!-- åŠ¨æ€èƒŒæ™¯å±‚ -->
    <div class="absolute inset-0 z-0 overflow-hidden">
        <!-- æ¸å˜å…‰æ™• -->
        <div class="absolute top-0 left-0 w-full h-full bg-gradient-to-br from-indigo-900 via-purple-900 to-black opacity-80"></div>
        <!-- æ¼‚æµ®çš„å…‰ç‚¹ (è£…é¥°) -->
        <div class="absolute top-1/4 left-1/4 w-64 h-64 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float" style="animation-duration: 6s;"></div>
        <div class="absolute top-1/3 right-1/4 w-72 h-72 bg-pink-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float" style="animation-duration: 8s;"></div>
        <div class="absolute bottom-1/4 left-1/3 w-96 h-96 bg-blue-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float" style="animation-duration: 10s;"></div>
    </div>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <div class="relative z-10 flex-grow flex flex-col items-center justify-center p-4">
        
        <!-- æ ‡é¢˜åŒºåŸŸ -->
        <header class="text-center mb-8 animate-pop">
            <h1 class="text-4xl md:text-6xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-pink-300 via-purple-300 to-indigo-300 drop-shadow-lg tracking-wider">
                Visual Collection
            </h1>
            <p class="mt-2 text-indigo-200 text-sm md:text-base tracking-widest uppercase opacity-80">
                ç‚¹å‡»ç›²ç›’ Â· æ¢ç´¢æœªçŸ¥ Â· é‡è§æƒŠå–œ
            </p>
        </header>

        <!-- ç›²ç›’å±•ç¤ºåŒº -->
        <div id="main-container" class="relative w-full max-w-md flex items-center justify-center transition-all duration-300">
            
            <!-- æœªå¼€å¯çŠ¶æ€ï¼šç¤¼ç‰©ç›’ -->
            <div id="gift-box" class="w-full aspect-square cursor-pointer transition-transform transform hover:scale-105 active:scale-95 z-20 flex flex-col items-center justify-center" onclick="openBox()">
                <div class="relative animate-float">
                    <i class="fa-solid fa-gift text-9xl text-pink-400 drop-shadow-[0_0_35px_rgba(236,72,153,0.6)]"></i>
                    <div class="absolute -bottom-4 left-1/2 transform -translate-x-1/2 w-24 h-4 bg-black opacity-30 blur-md rounded-full"></div>
                </div>
                <div class="mt-8 text-center">
                    <button class="px-8 py-3 rounded-full bg-gradient-to-r from-pink-500 to-violet-600 text-white font-bold shadow-lg border border-white/20 hover:from-pink-400 hover:to-violet-500 transition-all duration-300 tracking-wide text-lg animate-[glow_3s_infinite]">
                        å¼€å¯ç›²ç›’
                    </button>
                </div>
            </div>

            <!-- å¼€å¯åï¼šå±•ç¤ºå¡ç‰‡ (é»˜è®¤éšè—) -->
            <div id="result-card" class="hidden w-full glass-card rounded-2xl p-2 flex flex-col animate-pop shadow-2xl shadow-purple-500/20 z-30 relative">
                <!-- å…³é—­æŒ‰é’® -->
                <button onclick="resetBox()" class="absolute top-2 right-2 z-50 w-8 h-8 rounded-full bg-black/50 hover:bg-black/80 text-white flex items-center justify-center backdrop-blur-sm transition-colors">
                    <i class="fa-solid fa-times"></i>
                </button>
                
                <!-- å†…å®¹å®¹å™¨ -->
                <div class="w-full rounded-xl overflow-hidden bg-black/40 flex items-center justify-center min-h-[200px]">
                    <div id="media-container" class="w-full flex items-center justify-center">
                        <!-- å†…å®¹ä¼šè¢«åŠ¨æ€æ³¨å…¥åˆ°è¿™é‡Œ -->
                    </div>
                </div>

                <!-- å†æ¥ä¸€æ¬¡æŒ‰é’® -->
                <div class="mt-2 text-center">
                    <button onclick="openBox()" class="text-xs text-purple-200 hover:text-white hover:underline py-2">
                        <i class="fa-solid fa-rotate-right mr-1"></i> å†æŠ½ä¸€æ¬¡
                    </button>
                </div>
            </div>

        </div>

        <!-- åº•éƒ¨ç‰ˆæƒ/ä¸ªäººç­¾å -->
        <footer class="mt-12 text-white/30 text-xs">
            Designed for Visual Art Showcase
        </footer>
    </div>

    <!-- æ ¸å¿ƒé€»è¾‘ -->
    <script>
        // ==========================================
        // ğŸ‘‡ğŸ‘‡ğŸ‘‡ è‡ªåŠ¨ç”Ÿæˆé…ç½®åŒº ğŸ‘‡ğŸ‘‡ğŸ‘‡
        // ==========================================
        
        const collection = [];

        // 1. è‡ªåŠ¨æ·»åŠ è§†é¢‘ï¼š1.mp4 åˆ° 3.mp4
        for (let i = 1; i <= 3; i++) {
            collection.push({
                type: 'video',
                src: `./${i}.mp4`  // ./ä»£è¡¨å½“å‰ç›®å½•
            });
        }

        // 2. è‡ªåŠ¨æ·»åŠ å›¾ç‰‡ï¼š4.png åˆ° 28.png
        for (let i = 4; i <= 28; i++) {
            collection.push({
                type: 'image',
                src: `./${i}.png`
            });
        }

        // ğŸ’¡ ä»¥åå¦‚æœä½ åŠ äº†æ›´å¤šå›¾ç‰‡ï¼Œæ¯”å¦‚åŠ åˆ° 50 å¼ ï¼Œ
        // åªéœ€è¦æŠŠä¸Šé¢çš„ '28' æ”¹æˆ '50' å°±å¯ä»¥äº†ï¼
        
        // ==========================================
        // ğŸ‘†ğŸ‘†ğŸ‘† é…ç½®åŒºç»“æŸ ğŸ‘†ğŸ‘†ğŸ‘†
        // ==========================================

        const giftBox = document.getElementById('gift-box');
        const resultCard = document.getElementById('result-card');
        const mediaContainer = document.getElementById('media-container');
        let isAnimating = false;

        function getRandomContent() {
            const index = Math.floor(Math.random() * collection.length);
            return collection[index];
        }

        function openBox() {
            if (isAnimating) return;
            isAnimating = true;

            if (!resultCard.classList.contains('hidden')) {
                resultCard.classList.add('hidden');
                giftBox.classList.remove('hidden');
            }

            const icon = giftBox.querySelector('i');
            icon.parentElement.classList.remove('animate-float');
            giftBox.classList.add('animate-shake');

            setTimeout(() => {
                giftBox.classList.remove('animate-shake');
                icon.parentElement.classList.add('animate-float');
                
                showResult();
                fireConfetti();
                
                isAnimating = false;
            }, 800);
        }

        function showResult() {
            const item = getRandomContent();
            mediaContainer.innerHTML = '';
            let mediaElement;
            
            if (item.type === 'video') {
                const video = document.createElement('video');
                video.src = item.src;
                video.autoplay = true;
                video.loop = true;
                video.controls = true; 
                video.muted = true; 
                // è§†é¢‘é”™è¯¯å¤„ç†ï¼šå¦‚æœåŠ è½½å¤±è´¥ï¼ˆæ¯”å¦‚æ–‡ä»¶åä¸å¯¹ï¼‰ï¼Œä¼šåœ¨æ§åˆ¶å°æŠ¥é”™
                video.onerror = function() {
                    console.error("æ— æ³•åŠ è½½è§†é¢‘:", item.src);
                    alert("è§†é¢‘åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶åæ˜¯å¦æ­£ç¡® (mp4)");
                };
                video.className = 'max-w-full max-h-[75vh] w-auto h-auto object-contain rounded-lg shadow-lg';
                mediaElement = video;
            } else {
                const img = document.createElement('img');
                img.src = item.src;
                img.onerror = function() {
                    console.error("æ— æ³•åŠ è½½å›¾ç‰‡:", item.src);
                    // å¦‚æœåŠ è½½å¤±è´¥ï¼Œå¯ä»¥ç»™ä¸€ä¸ªç®€å•çš„æç¤º
                    img.alt = "å›¾ç‰‡åŠ è½½å¤±è´¥ (æ£€æŸ¥æ–‡ä»¶å)";
                };
                img.className = 'max-w-full max-h-[75vh] w-auto h-auto object-contain rounded-lg shadow-lg pointer-events-none';
                mediaElement = img;
            }

            mediaContainer.appendChild(mediaElement);
            giftBox.classList.add('hidden');
            resultCard.classList.remove('hidden');
        }

        function resetBox() {
            resultCard.classList.add('hidden');
            giftBox.classList.remove('hidden');
            mediaContainer.innerHTML = '';
        }

        function fireConfetti() {
            var count = 200;
            var defaults = { origin: { y: 0.7 } };

            function fire(particleRatio, opts) {
                confetti(Object.assign({}, defaults, opts, {
                    particleCount: Math.floor(count * particleRatio)
                }));
            }

            fire(0.25, { spread: 26, startVelocity: 55, colors: ['#ec4899', '#8b5cf6'] });
            fire(0.2, { spread: 60, colors: ['#ffffff', '#ec4899'] });
            fire(0.35, { spread: 100, decay: 0.91, scalar: 0.8 });
            fire(0.1, { spread: 120, startVelocity: 25, decay: 0.92, scalar: 1.2 });
            fire(0.1, { spread: 120, startVelocity: 45 });
        }
    </script>
</body>
</html>